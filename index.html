
<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="mdzdoc-css/main.css" type="text/css" charset="utf-8">
    <title>Jhydro</title>
    <meta name="description" content="">
  </head>
  <body>
    <div class="content-wrapper">
      

<h1>Jhydro Documentation
</h1>
<p>Jhydro is a lightweight cryptographic library for Janet. It is a binding to
libhydrogen, which can be found at <a href="https://github.com/jedisct1/libhydrogen">https://github.com/jedisct1/libhydrogen</a>.
Jhydro is a direct binding to libhydrogen that supports cryptographic random
number generation, hashing, symmetric key encryption, password hashing, key
derivation functions, and public key signatures. These are all built using only
a few built in primitives, which means that jhydro will not let you interact
with other standard cryptographic formats such as SHA-256, AES, RSA, etc. Do
not use jhydro if you want to implement SSL, for example. Jhydro will help you
implement your own secure protocol over an insecure network, however.
</p>
<h2>Source code
</h2>
<p><a href="https://github.com/janet-lang/jhydro">https://github.com/janet-lang/jhydro</a></p><h2>Install
</h2>
<pre class="mendoza-codeblock"><code>[sudo] jpm install https://github.com/janet-lang/jhydro.git</code></pre><hr><h2>Random Number Generation
</h2>
<p><a href="#random/buf">random/buf</a><span class="divider"> </span><a href="#random/buf-deterministic">random/buf-deterministic</a><span class="divider"> </span><a href="#random/ratchet">random/ratchet</a><span class="divider"> </span><a href="#random/reseed">random/reseed</a><span class="divider"> </span><a href="#random/seed-bytes">random/seed-bytes</a><span class="divider"> </span><a href="#random/u32">random/u32</a><span class="divider"> </span><a href="#random/uniform">random/uniform</a></p><h2>Generic Hashing
</h2>
<p><a href="#hash/bytes">hash/bytes</a><span class="divider"> </span><a href="#hash/bytes-max">hash/bytes-max</a><span class="divider"> </span><a href="#hash/bytes-min">hash/bytes-min</a><span class="divider"> </span><a href="#hash/context-bytes">hash/context-bytes</a><span class="divider"> </span><a href="#hash/final">hash/final</a><span class="divider"> </span><a href="#hash/hash">hash/hash</a><span class="divider"> </span><a href="#hash/key-bytes">hash/key-bytes</a><span class="divider"> </span><a href="#hash/keygen">hash/keygen</a><span class="divider"> </span><a href="#hash/new-state">hash/new-state</a><span class="divider"> </span><a href="#hash/update">hash/update</a></p><h2>Key Derivation Functions
</h2>
<p><a href="#kdf/bytes-max">kdf/bytes-max</a><span class="divider"> </span><a href="#kdf/bytes-min">kdf/bytes-min</a><span class="divider"> </span><a href="#kdf/context-bytes">kdf/context-bytes</a><span class="divider"> </span><a href="#kdf/derive-from-key">kdf/derive-from-key</a><span class="divider"> </span><a href="#kdf/key-bytes">kdf/key-bytes</a><span class="divider"> </span><a href="#kdf/keygen">kdf/keygen</a></p><h2>Secret Box
</h2>
<p><a href="#secretbox/context-bytes">secretbox/context-bytes</a><span class="divider"> </span><a href="#secretbox/decrypt">secretbox/decrypt</a><span class="divider"> </span><a href="#secretbox/encrypt">secretbox/encrypt</a><span class="divider"> </span><a href="#secretbox/header-bytes">secretbox/header-bytes</a><span class="divider"> </span><a href="#secretbox/key-bytes">secretbox/key-bytes</a><span class="divider"> </span><a href="#secretbox/keygen">secretbox/keygen</a><span class="divider"> </span><a href="#secretbox/probe-bytes">secretbox/probe-bytes</a><span class="divider"> </span><a href="#secretbox/probe-create">secretbox/probe-create</a><span class="divider"> </span><a href="#secretbox/probe-verify">secretbox/probe-verify</a></p><h2>Signing
</h2>
<p><a href="#sign/bytes">sign/bytes</a><span class="divider"> </span><a href="#sign/context-bytes">sign/context-bytes</a><span class="divider"> </span><a href="#sign/create">sign/create</a><span class="divider"> </span><a href="#sign/final-create">sign/final-create</a><span class="divider"> </span><a href="#sign/final-verify">sign/final-verify</a><span class="divider"> </span><a href="#sign/keygen">sign/keygen</a><span class="divider"> </span><a href="#sign/keygen-deterministic">sign/keygen-deterministic</a><span class="divider"> </span><a href="#sign/new-state">sign/new-state</a><span class="divider"> </span><a href="#sign/public-key-bytes">sign/public-key-bytes</a><span class="divider"> </span><a href="#sign/secret-key-bytes">sign/secret-key-bytes</a><span class="divider"> </span><a href="#sign/seed-bytes">sign/seed-bytes</a><span class="divider"> </span><a href="#sign/update">sign/update</a><span class="divider"> </span><a href="#sign/verify">sign/verify</a></p><h2>Password Hashing
</h2>
<p><a href="#pwhash/create">pwhash/create</a><span class="divider"> </span><a href="#pwhash/derive-static-key">pwhash/derive-static-key</a><span class="divider"> </span><a href="#pwhash/deterministic">pwhash/deterministic</a><span class="divider"> </span><a href="#pwhash/keygen">pwhash/keygen</a><span class="divider"> </span><a href="#pwhash/reencrypt">pwhash/reencrypt</a><span class="divider"> </span><a href="#pwhash/upgrade">pwhash/upgrade</a><span class="divider"> </span><a href="#pwhash/verify">pwhash/verify</a></p><hr><h2>Api Docs
</h2>
<div class="docstring"><div class="binding-wrap"><span class="binding"><a id="hash/bytes">hash/bytes</a></span><span class="binding-type">number <code class="binding-realval">32</code></span></div><p>Number of bytes in a generic, simple hash.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="hash/bytes-max">hash/bytes-max</a></span><span class="binding-type">number <code class="binding-realval">65535</code></span></div><p>Maximum number of bytes allowed when creating a keyed hash.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="hash/bytes-min">hash/bytes-min</a></span><span class="binding-type">number <code class="binding-realval">16</code></span></div><p>Minimum number of bytes allowed when creating a keyed hash.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="hash/context-bytes">hash/context-bytes</a></span><span class="binding-type">number <code class="binding-realval">8</code></span></div><p>Number of bytes required in context buffer for hashing.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="hash/final">hash/final</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/hash/final</span> <span class="mdzsyn-symbol">state</span> <span class="mdzsyn-symbol">len</span>)</code></pre><p>Get the final hash after digesting all of the input as a string. The resulting hash will be a string of length len.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="hash/hash">hash/hash</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/hash/hash</span> <span class="mdzsyn-symbol">size</span> <span class="mdzsyn-symbol">input</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">key</span>)</code></pre><p>Hash some input bytes into an output string of length size. Optionally provide a key that can be used to generate different hashes on the same input.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="hash/key-bytes">hash/key-bytes</a></span><span class="binding-type">number <code class="binding-realval">32</code></span></div><p>Number of bytes in a key required for hashing.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="hash/keygen">hash/keygen</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/hash/keygen</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">buf</span>)</code></pre><p>Generate a key suitable for use in hashing. The key is a buffer of at least 32 bytes. If a buffer buf is provided, the first 32 bytes of buf will be set to a new random key. Returns a key buffer.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="hash/new-state">hash/new-state</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/hash/new-state</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">key</span>)</code></pre><p>Create a new hash-state. Takes a context ctx and a key and returns a new abstract type, jhydro/hash-state. Both ctx and key should be byte sequences, of at least lengths 8 and 32 respectively. Returns the new state.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="hash/update">hash/update</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/hash/update</span> <span class="mdzsyn-symbol">state</span> <span class="mdzsyn-symbol">bytes</span>)</code></pre><p>Add more bytes to the hash state. Returns the modified state</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="kdf/bytes-max">kdf/bytes-max</a></span><span class="binding-type">number <code class="binding-realval">65535</code></span></div><p>Maximum number of bytes allowed in kdf generated key.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="kdf/bytes-min">kdf/bytes-min</a></span><span class="binding-type">number <code class="binding-realval">16</code></span></div><p>Minimum number of bytes allowed in kdf generated key.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="kdf/context-bytes">kdf/context-bytes</a></span><span class="binding-type">number <code class="binding-realval">8</code></span></div><p>Number of bytes in context argument to jhydro/kdf functions.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="kdf/derive-from-key">kdf/derive-from-key</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/kdf/derive-from-key</span> <span class="mdzsyn-symbol">sublen</span> <span class="mdzsyn-symbol">subid</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">key</span>)</code></pre><p>Generate a subkey from a master key. Takes a subid, which is a positive integer that represents the key id, and ctx, which is an 8 byte string that is usually an application constant. Finally, the last parameter is the master key. Returns a string of length sublen.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="kdf/key-bytes">kdf/key-bytes</a></span><span class="binding-type">number <code class="binding-realval">32</code></span></div><p>Number of bytes in a kdf key.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="kdf/keygen">kdf/keygen</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/kdf/keygen</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">buf</span>)</code></pre><p>Generate a key for use in KDFs. Returns the modified buf if provided, or a new random buffer.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="pwhash/create">pwhash/create</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/pwhash/create</span> <span class="mdzsyn-symbol">passwd</span> <span class="mdzsyn-symbol">masterkey</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">opslimit</span> <span class="mdzsyn-symbol">memlimit</span> <span class="mdzsyn-symbol">threads</span>)</code></pre><p>Hash a password and get a blob that can be safely stored in a database. The returned result is a 128 byte string. Can take optional parameters to tune the difficulty of the hash.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="pwhash/derive-static-key">pwhash/derive-static-key</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/pwhash/derive-static-key</span> <span class="mdzsyn-symbol">keylen</span> <span class="mdzsyn-symbol">stored</span> <span class="mdzsyn-symbol">passwd</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">master-key</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">opslimit</span> <span class="mdzsyn-symbol">memlimit</span> <span class="mdzsyn-symbol">threads</span>)</code></pre><p>Derive a static key for used in cryptographic applications from a hashed password and other entropy (kept in stored). Returns a string with keylen bytes.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="pwhash/deterministic">pwhash/deterministic</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/pwhash/deterministic</span> <span class="mdzsyn-symbol">hlen</span> <span class="mdzsyn-symbol">passwd</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">master-key</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">opslimit</span> <span class="mdzsyn-symbol">memlimit</span> <span class="mdzsyn-symbol">threads</span>)</code></pre><p>Hash a password to produce a high entropy key. The returned hashed password is a string of length hlen.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="pwhash/keygen">pwhash/keygen</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/pwhash/keygen</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">buf</span>)</code></pre><p>Generate a master key for use in hashing passwords. The master key is used to encrypt all hashed passwords for an extra level of security. Returns a buffer with the new key.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="pwhash/reencrypt">pwhash/reencrypt</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/pwhash/reencrypt</span> <span class="mdzsyn-symbol">stored</span> <span class="mdzsyn-symbol">masterkey</span> <span class="mdzsyn-symbol">new-masterkey</span>)</code></pre><p>Re-encrypt a hashed password under a new master key without needing the original password, only the previously hashed password and master key. Returns the new hashed password as a string.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="pwhash/upgrade">pwhash/upgrade</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/pwhash/upgrade</span> <span class="mdzsyn-symbol">stored</span> <span class="mdzsyn-symbol">masterkey</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">opslimit</span> <span class="mdzsyn-symbol">memlimit</span> <span class="mdzsyn-symbol">threads</span>)</code></pre><p>Change the encryption parameters of a key to make decrypting faster or slower. This can be used to scale difficulty of password hashing in the event of hardware advancements. Returns the new password hash as a string.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="pwhash/verify">pwhash/verify</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/pwhash/verify</span> <span class="mdzsyn-symbol">stored</span> <span class="mdzsyn-symbol">passwd</span> <span class="mdzsyn-symbol">master-key</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">opslimit</span> <span class="mdzsyn-symbol">memlimit</span> <span class="mdzsyn-symbol">threads</span>)</code></pre><p>Check if a password matches a stored password hash. Hashing options must be the same as the ones used to created the stored hash.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="random/buf">random/buf</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/random/buf</span> <span class="mdzsyn-symbol">buf</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">size</span>)</code></pre><p>Fill a buffer with random bytes. If size is not provided, will clear and fill the given buffer. If size is provided, will append size random bytes to the buffer. Alternatively, you can provide just the size argument, and a new randomized buffer will be returned.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="random/buf-deterministic">random/buf-deterministic</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/random/buf-deterministic</span> <span class="mdzsyn-symbol">buf</span> <span class="mdzsyn-symbol">len</span> <span class="mdzsyn-symbol">seed</span>)</code></pre><p>Generate len random bytes and push them into a buffer buf. seed is a byte sequence of at least 32 bytes that initializes the state of the RNG. Returns the modified buffer.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="random/ratchet">random/ratchet</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/random/ratchet</span>)</code></pre><p>Increment the internal state of the RNG.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="random/reseed">random/reseed</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/random/reseed</span>)</code></pre><p>Provide a new random seed for the internal RNG.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="random/seed-bytes">random/seed-bytes</a></span><span class="binding-type">number <code class="binding-realval">32</code></span></div><p>Number of bytes in a seed for the RNG.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="random/u32">random/u32</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/random/u32</span>)</code></pre><p>Generate a psuedo random 32 bit unsigned integer</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="random/uniform">random/uniform</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/random/uniform</span> <span class="mdzsyn-symbol">top</span>)</code></pre><p>Generate a random 32 bit unsigned integer less than top.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/context-bytes">secretbox/context-bytes</a></span><span class="binding-type">number <code class="binding-realval">8</code></span></div><p>Number of bytes in a context for secretbox functions.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/decrypt">secretbox/decrypt</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/secretbox/decrypt</span> <span class="mdzsyn-symbol">cipher-text</span> <span class="mdzsyn-symbol">msg-id</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">key</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">buf</span>)</code></pre><p>Decrypt a cipher text that was produced with jhydro/secretbox/encrypt. msg-id, ctx, and key must be the same as those used to encrypt the message. An optional buffer can be used to contain the plain text, otherwise a new buffer is created. Returns a buffer containing the plain text.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/encrypt">secretbox/encrypt</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/secretbox/encrypt</span> <span class="mdzsyn-symbol">msg</span> <span class="mdzsyn-symbol">msg-id</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">key</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">buf</span>)</code></pre><p>Encrypt a message with a secretbox key and return the cipher text in a buffer. Also requires a message id, which is an integer, and a ctx, which is a non-secret byte-sequence. Lastly, requires a secret symmetric key for encryption. An optional buffer will prevent Janet from creating a new buffer, and instead append to and return the provided buffer.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/header-bytes">secretbox/header-bytes</a></span><span class="binding-type">number <code class="binding-realval">36</code></span></div><p>Number of bytes in the header of an encrypted message.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/key-bytes">secretbox/key-bytes</a></span><span class="binding-type">number <code class="binding-realval">32</code></span></div><p>Number of bytes in a secretbox key.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/keygen">secretbox/keygen</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jyhdro/secretbox/keygen</span>)</code></pre><p>Generate a key suitable for secretbox. The returned key is a 32 byte buffer.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/probe-bytes">secretbox/probe-bytes</a></span><span class="binding-type">number <code class="binding-realval">16</code></span></div><p>Number of bytes in a secretbox probe.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/probe-create">secretbox/probe-create</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/secretbox/probe-create</span> <span class="mdzsyn-symbol">cipher-text</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">key</span>)</code></pre><p>Create a probe for some cipher text created by jhydro/secretbox/encrypt. The resulting probe is a constant length string that can be used to verify if cipher text is valid before decrypting the entire text. Returns a string.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/probe-verify">secretbox/probe-verify</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/secretbox/probe-verify</span> <span class="mdzsyn-symbol">probe</span> <span class="mdzsyn-symbol">cipher-text</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">key</span>)</code></pre><p>Use a probe produced by jhydro/secretbox/probe-create to check if some cipher text is genuine. If the cipher text is not forged or tampered with, returns true, otherwise false. Genuine cipher text can then be decrypted. Returns a boolean.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/bytes">sign/bytes</a></span><span class="binding-type">number <code class="binding-realval">64</code></span></div><p>Number of bytes in a signature.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/context-bytes">sign/context-bytes</a></span><span class="binding-type">number <code class="binding-realval">8</code></span></div><p>Number of bytes needed for a signature context.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/create">sign/create</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/sign/create</span> <span class="mdzsyn-symbol">msg</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">sk</span>)</code></pre><p>Create a new sigature from a message, ctx, and secret key. The message can be any byte sequence, the context ctx should be a byte sequence of at least 8 bytes, and the secret key sk should be secret key as generated from jhydro/sign/keygen or jhydro/sign/keygen-deterministic. Returns a signature, which is a 64 byte string.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/final-create">sign/final-create</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/sign/final-create</span> <span class="mdzsyn-symbol">state</span> <span class="mdzsyn-symbol">sk</span>)</code></pre><p>Create a signature from the sign-state. Takes a jhydro/sign-state state and a secret key sk. Returns the signature and also modifies the state.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/final-verify">sign/final-verify</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/sign/final-verify</span> <span class="mdzsyn-symbol">state</span> <span class="mdzsyn-symbol">csig</span> <span class="mdzsyn-symbol">pk</span>)</code></pre><p>Verify a signature with a public key. Given a sign-state state, signature csig, and public key pk, return true if csig is valid, otherwise false.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/keygen">sign/keygen</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/sign/keygen</span>)</code></pre><p>Create a random key pair for public key signing. Returns a struct containing a :public-key and a :secret-key as strings.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/keygen-deterministic">sign/keygen-deterministic</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/sign/keygen-deterministic</span> <span class="mdzsyn-symbol">seed</span>)</code></pre><p>Create a key pair from a seed. Seed should be a byte sequence of at least 32 bytes; jhydro/random/buf should work well. Returns a struct of two key value pairs, a :secret-key and a :public-key. Each key is a string.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/new-state">sign/new-state</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/sign/new-state</span> <span class="mdzsyn-symbol">ctx</span>)</code></pre><p>Create a new state machine for generating a signature. A state machine allows processing a message in chunks to generate a signature. A string ctx of at least 8 bytes is also required, and can be a hrad coded string. Returns a new jhydro/sign-state.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/public-key-bytes">sign/public-key-bytes</a></span><span class="binding-type">number <code class="binding-realval">32</code></span></div><p>Number of bytes in a public key for making signatures.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/secret-key-bytes">sign/secret-key-bytes</a></span><span class="binding-type">number <code class="binding-realval">64</code></span></div><p>Number of bytes in a secret key for making signatures.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/seed-bytes">sign/seed-bytes</a></span><span class="binding-type">number <code class="binding-realval">32</code></span></div><p>Number of bytes in a seed for generating a key.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/update">sign/update</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/sign/update</span> <span class="mdzsyn-symbol">state</span> <span class="mdzsyn-symbol">msg</span>)</code></pre><p>Process a message chunk for generating a signature. Returns the modified signature state.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="sign/verify">sign/verify</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">jhydro/sign/verify</span> <span class="mdzsyn-symbol">csig</span> <span class="mdzsyn-symbol">msg</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">pk</span>)</code></pre><p>Check a signature to determine if a message is authentic. csig is the signature as generated by jhydro/sign/create or jhydro/sign/final-create, msg is the message that we are checking, ctx is the context string, and pk is the public key. Returns a boolean, true if the signature is valid, false otherwise.</p></div>
    </div>
    <footer>
      <div class="content-wrapper">
        Copyright &copy; Calvin Rose 2019
      </div>
    </footer>
  </body>
</html>
