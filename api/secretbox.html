



<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="../mdzdoc-css/main.css" type="text/css" charset="utf-8">
    <title>Symmetric Encryption</title>
    <meta name="description" content="">
  </head>
  <body>
    <!-- Toggles Navigation -->
    <div id="toc-toggle" class="">
      <div class="bar topbar"></div>
      <div class="bar"></div>
      <div class="bar botbar"></div>
    </div>
    <div class="twocol">
      <div class="toc toc-hidden">
        <ul>
          <li><span><a href="../index.html">Jhydro</a></span></li><li class="caret"><span><a href="index.html">API</a></span><ul><li><span><a href="hash.html">General Purpose Hashing</a></span></li><li><span><a href="kdf.html">Key Derivation</a></span></li><li><span><a href="kx.html">Key Exchange</a></span></li><li><span><a href="pwhash.html">Password Hashing</a></span></li><li><span><a href="sign.html">Public Key Signing</a></span></li><li><span><a href="random.html">Random Number Generation</a></span></li><li><span class="selected"><a href="secretbox.html">Symmetric Encryption</a></span></li><li><span><a href="util.html">Utilities</a></span></li></ul></li>
        </ul>
      </div>
      <div class="content-wrapper">
        <h1>Symmetric Encryption</h1>
        <div class="prevnext-bar">
          <span class="prev"><a href="random.html"><span class="prevnext-text">Random Number Generation</span></a></span>
          <span class="next"><a href="util.html"><span class="prevnext-text">Utilities</span></a></span>
        </div>
        

<h2>Index
</h2>
<p><a href="#secretbox/context-bytes">secretbox/context-bytes</a><span class="divider"> </span><a href="#secretbox/decrypt">secretbox/decrypt</a><span class="divider"> </span><a href="#secretbox/encrypt">secretbox/encrypt</a><span class="divider"> </span><a href="#secretbox/header-bytes">secretbox/header-bytes</a><span class="divider"> </span><a href="#secretbox/key-bytes">secretbox/key-bytes</a><span class="divider"> </span><a href="#secretbox/keygen">secretbox/keygen</a><span class="divider"> </span><a href="#secretbox/probe-bytes">secretbox/probe-bytes</a><span class="divider"> </span><a href="#secretbox/probe-create">secretbox/probe-create</a><span class="divider"> </span><a href="#secretbox/probe-verify">secretbox/probe-verify</a></p><h2>Reference
</h2>
<div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/context-bytes">secretbox/context-bytes</a></span><span class="binding-type">number <code class="binding-realval">8</code></span></div><p>Number of bytes in a context for secretbox functions.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/decrypt">secretbox/decrypt</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">secretbox/decrypt</span> <span class="mdzsyn-symbol">cipher-text</span> <span class="mdzsyn-symbol">msg-id</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">key</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">buf</span>)</code></pre><p>Decrypt a cipher text that was produced with secretbox/encrypt. msg-id, ctx, and key must be the same as those used to encrypt the message. An optional buffer can be used to contain the plain text, otherwise a new buffer is created. Returns a buffer containing the plain text.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/encrypt">secretbox/encrypt</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">secretbox/encrypt</span> <span class="mdzsyn-symbol">msg</span> <span class="mdzsyn-symbol">msg-id</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">key</span> <span class="mdzsyn-symbol">&amp;opt</span> <span class="mdzsyn-symbol">buf</span>)</code></pre><p>Encrypt a message with a secretbox key and return the cipher text in a buffer. Also requires a message id, which is an integer, and a ctx, which is a non-secret byte-sequence. Lastly, requires a secret symmetric key for encryption. An optional buffer will prevent Janet from creating a new buffer, and instead append to and return the provided buffer.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/header-bytes">secretbox/header-bytes</a></span><span class="binding-type">number <code class="binding-realval">36</code></span></div><p>Number of bytes in the header of an encrypted message.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/key-bytes">secretbox/key-bytes</a></span><span class="binding-type">number <code class="binding-realval">32</code></span></div><p>Number of bytes in a secretbox key.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/keygen">secretbox/keygen</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">secretbox/keygen</span>)</code></pre><p>Generate a key suitable for secretbox. The returned key is a 32 byte buffer.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/probe-bytes">secretbox/probe-bytes</a></span><span class="binding-type">number <code class="binding-realval">16</code></span></div><p>Number of bytes in a secretbox probe.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/probe-create">secretbox/probe-create</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">secretbox/probe-create</span> <span class="mdzsyn-symbol">cipher-text</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">key</span>)</code></pre><p>Create a probe for some cipher text created by secretbox/encrypt. The resulting probe is a constant length string that can be used to verify if cipher text is valid before decrypting the entire text. Returns a string.</p></div><div class="docstring"><div class="binding-wrap"><span class="binding"><a id="secretbox/probe-verify">secretbox/probe-verify</a></span><span class="binding-type">cfunction</span></div><pre class="mendoza-codeblock"><code data-language="janet">(<span class="mdzsyn-symbol">secretbox/probe-verify</span> <span class="mdzsyn-symbol">probe</span> <span class="mdzsyn-symbol">cipher-text</span> <span class="mdzsyn-symbol">ctx</span> <span class="mdzsyn-symbol">key</span>)</code></pre><p>Use a probe produced by secretbox/probe-create to check if some cipher text is genuine. If the cipher text is not forged or tampered with, returns true, otherwise false. Genuine cipher text can then be decrypted. Returns a boolean.</p></div>
        <div class="prevnext-bar">
          <span class="prev"><a href="random.html"><span class="prevnext-text">Random Number Generation</span></a></span>
          <span class="next"><a href="util.html"><span class="prevnext-text">Utilities</span></a></span>
        </div>
      </div>
    </div>
    <script charset="utf-8">
      function toggleToc() {
        var toggler = document.getElementById('toc-toggle');
        var wrapper = document.querySelector('.toc');
        wrapper.classList.toggle('toc-hidden');
        toggler.classList.toggle('open');
        window.localStorage.setItem('show-toc', toggler.classList.contains('open'));
      }
      function addTocToggle() {
        var el = document.getElementById('toc-toggle');
        el.addEventListener('click', toggleToc);
      }
      window.addEventListener('DOMContentLoaded', addTocToggle);
      if (window.localStorage.getItem('show-toc') === 'true') {
        toggleToc()
      }
    </script>
    <footer>
      <div class="content-wrapper">
        Copyright &copy; Calvin Rose 2019
      </div>
    </footer>
  </body>
</html>
